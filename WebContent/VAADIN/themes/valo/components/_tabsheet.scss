$v-tabsheet-content-animation-enabled: $v-animations-enabled !default;




@mixin valo-tabsheet-global ($primary-stylename: v-tabsheet) {
  .#{$primary-stylename}-hidetabs > .#{$primary-stylename}-tabcontainer,
  .#{$primary-stylename}-spacertd,
  .v-disabled .#{$primary-stylename}-scroller,
  .#{$primary-stylename} .v-disabled .#{$primary-stylename}-caption-close {
    display: none;
  }

  .#{$primary-stylename} {
    overflow: visible !important;
    position: relative;
  }

  .#{$primary-stylename}-tabcontainer {
    table,
    tbody,
    tr {
      display: inline-block;
      border-spacing: 0;
      border-collapse: collapse;
      vertical-align: top;
    }

    td {
      display: inline-block;
      padding: 0;
    }
  }

  .#{$primary-stylename}-tabs {
    white-space: nowrap;
    @include box-sizing(border-box);
  }

  .#{$primary-stylename}-content {
    position: relative;

    > div > .v-scrollable {
      @include valo-panel-adjust-content-margins;
    }
  }

}





@mixin valo-tabsheet ($primary-stylename: v-tabsheet) {
  .#{$primary-stylename} {
    &:not(.v-has-width) {
      width: auto !important;
    }
  }

  .#{$primary-stylename}-spacertd {
    display: none !important;
  }

  .#{$primary-stylename}-tabcontainer {
    @include valo-tabsheet-tabcontainer-style($primary-stylename);
  }

  .#{$primary-stylename}-tabitemcell {
    @include valo-tabsheet-tabitemcell-style($primary-stylename);
  }

  .#{$primary-stylename}-scroller {
    @include valo-tabsheet-scroller-style($primary-stylename);
  }


  @if $v-tabsheet-content-animation-enabled {
    .#{$primary-stylename}-tabsheetpanel > .v-scrollable > .v-widget {
      @include valo-anim-fade-in(300ms);
    }

    .#{$primary-stylename}-deco {
      @include valo-spinner($size: $v-unit-size/2);
      display: block;
      position: absolute;
      z-index: -1;
      bottom: 50%;
      margin-bottom: round($v-unit-size/2 + $v-unit-size/4) * -1;
      left: 50%;
      margin-left: round($v-unit-size/-4);
      opacity: 0;
    }

    .#{$primary-stylename}-loading .#{$primary-stylename}-deco {
      @include transition(opacity 200ms 200ms);
      opacity: 1;
      z-index: 1;
    }
  }

}


@mixin valo-tabsheet-tabcontainer-style ($primary-stylename: v-tabsheet) {
  position: relative;
  @include user-select(none);
  @include box-sizing(border-box);

  &:before {
    content: "";
    position: absolute;
    height: max(1px, first-number($v-border));
    background: first-color(valo-border($strength: 0.5));
    bottom: 0;
    left: 0;
    right: 0;
  }

  .#{$primary-stylename}-tabs {
    height: $v-unit-size;
    position: relative;
  }
}


@mixin valo-tabsheet-tabitemcell-style ($primary-stylename: v-tabsheet) {

  .#{$primary-stylename}-tabitem {
    line-height: 0;
    overflow: hidden;
  }

  .v-caption {
    height: $v-unit-size;
    margin-left: round($v-unit-size/2);
    padding: 0 round($v-unit-size/10);
    @include box-sizing(border-box);
    cursor: pointer;
    text-align: center;
    line-height: $v-unit-size;
    font-size: round($v-font-size * 0.95);
    font-weight: $v-font-weight;
    color: valo-font-color($v-app-background-color, 0.58);
    width: auto !important;
    overflow: hidden;

    @if $v-animations-enabled {
      @include transition(border-bottom 200ms, color 200ms);
    }

    .v-icon + .v-captiontext {
      margin-left: round($v-unit-size/4);
    }

    &:hover {
      color: $v-selection-color;
    }

    &.v-disabled {
      @include opacity($v-disabled-opacity);
      cursor: default;
      color: inherit !important;
      border-bottom: none;
    }
  }

  &:first-child .v-caption,
  &[aria-hidden="true"] + td .v-caption {
    margin-left: 0;
  }

  &:focus {
    outline: none;

    .v-caption {
      color: $v-selection-color;
      border-bottom: max(1px, first-number($v-border)) solid $v-selection-color;
    }
  }

  .#{$primary-stylename}-tabitem-selected .v-caption.v-caption {
    border-bottom: max(1px, first-number($v-border))*2 solid $v-selection-color;
    color: $v-selection-color;
  }

  .#{$primary-stylename}-caption-close {
    display: inline-block;
    font-size: round($v-font-size * 1.1);
    line-height: round($v-font-size * 1.1);
    width: round($v-font-size * 1.1);
    vertical-align: middle;
    text-align: center;
    margin: 0 round($v-font-size/-4) 0 round($v-font-size/2);
    border-radius: round($v-border-radius/2);
    color: valo-font-color($v-app-background-color, 0.4);

    &:hover {
      background: rgba(#000, .03);
      color: $v-selection-color;
    }

    &:active {
      background: $v-selection-color;
      color: valo-font-color($v-selection-color);
    }
  }
}


@mixin valo-tabsheet-scroller-style ($primary-stylename: v-tabsheet) {
  $border-color: first-color(valo-border($strength: 0.5));

  position: absolute;
  right: 0;
  bottom: 0;
  padding-left: round($v-unit-size/2);
  @include linear-gradient(to left, $v-background-color 70%, rgba($v-background-color, 0) 100%, $fallback: transparent);
  pointer-events: none;
  line-height: $v-unit-size;

  &:after {
    content: "";
    height: first-number($v-border);
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    display: block;
    @include linear-gradient(to left, $border-color 70%, rgba($border-color, 0) 100%, $fallback: transparent);
  }

  .v-ie8 &,
  .v-ie9 & {
    background-color: $v-background-color;

    &:after {
      background-color: $border-color;
    }
  }

  button {
    @include appearance(none);
    border: none;
    background: transparent;
    font: inherit;
    color: inherit;
    height: $v-unit-size;
    line-height: $v-unit-size;
    margin: 0;
    padding: 0 round($v-unit-size/4);
    outline: none;
    cursor: pointer;
    pointer-events: auto;
    @include opacity(.5);

    &:hover {
      @include opacity(1);
      color: $v-selection-color;
    }

    &:active {
      @include opacity(.7);
      color: $v-selection-color;
    }

    &::-moz-focus-inner {
      padding: 0;
      border: 0
    }
  }

  [class*="Next"] {
    padding-left: round($v-unit-size/8);
    &:before {
      @include valo-tabsheet-scroller-next-icon-style;
    }
  }

  [class*="Prev"] {
    padding-right: round($v-unit-size/8);
    &:before {
      @include valo-tabsheet-scroller-prev-icon-style;
    }
  }

  [class*="disabled"] {
    cursor: default;
    color: inherit !important;
    @include opacity(.1 !important);
  }
}


@mixin valo-tabsheet-scroller-prev-icon-style {
  font-family: FontAwesome;
  content: "\f053";
}


@mixin valo-tabsheet-scroller-next-icon-style {
  font-family: FontAwesome;
  content: "\f054";
}








@mixin valo-tabsheet-framed-style ($primary-stylename: v-tabsheet) {
  > .#{$primary-stylename}-tabcontainer {
    .v-caption {
      position: relative;
      margin-left: first-number($v-border) * 2;
      padding: 0 $v-layout-spacing-horizontal;
      border: first-number($v-border) solid transparent;
      line-height: $v-unit-size - first-number($v-border);
      border-radius: $v-border-radius $v-border-radius 0 0;
      font-weight: $v-font-weight + 100;

      @if $v-animations-enabled {
        @include transition(background-color 160ms);
      }

      &:hover {
        background-color: darken($v-app-background-color, 3%);
        border-bottom-color: first-color(valo-border($strength: 0.5));
      }
    }

    td:first-child .v-caption,
    [aria-hidden="true"] + td .v-caption {
      margin-left: 0;
    }

    .#{$primary-stylename}-tabitem-selected .v-caption {
      background: $v-panel-background-color;
      border-color: first-color(valo-border($strength: 0.5));
      border-bottom: none;
    }

    .v-caption-closable {
      padding-right: $v-layout-spacing-horizontal + round($v-font-size * 1.1);
    }

    .#{$primary-stylename}-caption-close {
      position: absolute;
      top: round($v-font-size/4);
      right: round($v-font-size/4);
      margin: 0;
    }
  }

  > .#{$primary-stylename}-content {
    background: $v-panel-background-color;
    border: valo-border($strength: 0.5);
    border-top: none;
  }

  &.padded-tabbar {
    > .#{$primary-stylename}-tabcontainer {
      border: valo-border($strength: 0.5);
      border-bottom: none;
      background: $v-background-color;
      padding-top: round($v-unit-size/6);
    }
  }

  &.icons-on-top .v-caption-closable {
    padding-right: $v-layout-spacing-horizontal;
  }
}









@mixin valo-tabsheet-centered-tabs-style ($primary-stylename: v-tabsheet) {
  > .#{$primary-stylename}-tabcontainer {
    text-align: center;
  }
}

@mixin valo-tabsheet-equal-width-tabs-style ($primary-stylename: v-tabsheet, $flex: false) {
  > .#{$primary-stylename}-tabcontainer {
    table,
    tbody,
    tr {
      width: 100%;
    }

    tr {
      display: table;
      @if $flex == false {
        table-layout: fixed;
      }
    }

    td {
      display: table-cell;
    }

    .v-caption {
      margin: 0;
      display: block;
    }
  }
}

@mixin valo-tabsheet-icons-on-top-style ($primary-stylename: v-tabsheet) {
  > div > .#{$primary-stylename}-tabs {
    height: $v-unit-size * 2;

    .v-caption {
      height: $v-unit-size * 2;
      padding-top: $v-unit-size;
    }

    .v-icon {
      display: block;
      font-size: $v-font-size * 2;
      $_offset: round($v-unit-size/4);
      margin: -($v-unit-size - $_offset) auto #{-$_offset};
      min-height: $v-unit-size;

      + .v-captiontext.v-captiontext {
        margin-left: 0;
      }
    }
  }

  .#{$primary-stylename}-scroller {
    line-height: $v-unit-size*2;

    button[class] {
      padding: 0 round($v-unit-size/4);
      display: block;
    }
  }

  > .#{$primary-stylename}-deco {
    margin-bottom: -$v-unit-size - round($v-unit-size/4);
  }
}


@mixin valo-tabsheet-only-selected-closable-style ($primary-stylename: v-tabsheet) {
  > .#{$primary-stylename}-tabcontainer .#{$primary-stylename}-caption-close {
    visibility: hidden;
  }

  > .#{$primary-stylename}-tabcontainer .#{$primary-stylename}-tabitem-selected .#{$primary-stylename}-caption-close {
    visibility: visible;
  }
}


@mixin valo-tabsheet-padded-tabbar-style ($primary-stylename: v-tabsheet) {
  > .#{$primary-stylename}-tabcontainer .#{$primary-stylename}-tabs {
    padding: 0 round($v-unit-size/4);
  }
}
